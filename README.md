# Запуск проекта

Проект запускается в Docker-контейнерах вместе со связанными приложениями

### Перед запуском контейнеров нужно файл .env.dist переименовать в .env.  
В файле указать следующие переменные:
- DJANGO_SECRET_KEY=<секретный ключ Django>
- POSTGRES_DB=movies
- POSTGRES_USER=movies
- POSTGRES_PASSWORD=<укажите ваш пароль>

### Команды для запуска приложений:  
```bash
docker-compose build
```  
```bash
docker-compose up -d
```

### Заполнение базы данных фикстурами
1. С помощью команды ```docker ps``` узнайте имя контейнера c приложением admin_panel  
2. Войдите в контейнер ```docker exec -it <имя контейнера> bash```  
3. Запустите консоль django shell командой ```python manage.py shell```  
4. Внутри консоли выполните команды:  
```python
from movie.factories import make_objects
make_objects()
```  

### Заполнение индексов ElasticSearch
После перезапуска контейнера с ElasticSearch содержимое его индексов будет утеряно.
Для восстановления необходимо:
1. С помощью команды ```docker ps``` узнайте имя контейнера, в котором запущен redis
2. Войдите в контейнер ```docker exec -it <имя контейнера> redis-cli```
3. Удалите ключ, который содержит дату предыдущего обновления индексов, командой ```# del Movie_ETL [movies]```

**Обратите внимание, что на запуск и обновление индексов ElasticSearch требуется около трех минут.  
Период обновления индексов - через каждые три минуты**